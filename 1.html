<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Readdy-style Dashboard — Single File</title>
<style>
  :root{
    --bg:#f5f7fb;--surface:#ffffff;--muted:#69707a;--text:#0f1724;
    --accent:#5b8cff;--success:#16a34a;--danger:#ef4444;--glass:rgba(255,255,255,0.6);
    --shadow: 0 6px 18px rgba(16,24,40,0.06);
    --radius:12px;
    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Segoe UI Mono", "SF Pro Text";
    --sys: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:var(--sys);-webkit-font-smoothing:antialiased}
  .app{display:grid;grid-template-columns:260px 1fr;min-height:100vh;gap:24px;padding:20px}
  /* Sidebar */
  .sidebar{background:var(--surface);border-radius:14px;padding:14px;box-shadow:var(--shadow);height:calc(100vh - 40px);overflow:auto;position:sticky;top:20px}
  .brand{display:flex;align-items:center;gap:10px;margin-bottom:12px}
  .brand svg{width:36px;height:36px}
  nav ul{list-style:none;padding:0;margin:8px 0}
  nav li{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;cursor:pointer;color:var(--muted)}
  nav li.active{background:linear-gradient(90deg,#eef5ff,transparent);color:var(--text);border-left:4px solid var(--accent)}
  .toggle{margin-top:10px;padding:8px;width:100%;border-radius:10px;border:1px dashed #e6eefc;background:transparent;color:var(--muted);cursor:pointer}
  /* Collapsed styles */
  .collapsed .app{grid-template-columns:80px 1fr}
  .collapsed .sidebar nav li span.label{display:none}
  .collapsed .brand span{display:none}
  /* Main */
  main{min-height:100vh}
  .topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
  .search{display:flex;align-items:center;background:var(--surface);padding:8px;border-radius:10px;box-shadow:var(--shadow);gap:8px;min-width:220px}
  .search input{border:0;outline:none;background:transparent;font-size:14px;min-width:120px}
  .badge{background:var(--danger);color:#fff;padding:4px 8px;border-radius:999px;font-size:12px}
  /* Cards grid */
  .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:14px}
  .card{background:var(--surface);padding:14px;border-radius:12px;box-shadow:var(--shadow)}
  .card h3{margin:0;font-size:13px;color:var(--muted)}
  .card p{margin:6px 0 0;font-size:20px;font-weight:600}
  /* Layout for charts */
  .layout{display:grid;grid-template-columns:1fr 320px;gap:14px;margin-bottom:14px}
  .chart{background:var(--surface);padding:12px;border-radius:12px;box-shadow:var(--shadow)}
  canvas{width:100%;height:220px;display:block}
  .right-stack{display:flex;flex-direction:column;gap:12px}
  .donut{width:100%;height:160px}
  /* Table */
  .table-wrap{background:var(--surface);padding:12px;border-radius:12px;box-shadow:var(--shadow);overflow:auto}
  table{width:100%;border-collapse:collapse;font-size:14px}
  th,td{padding:10px;text-align:left;border-bottom:1px solid #eef2f7}
  .pill{padding:6px 10px;border-radius:999px;font-size:13px}
  .pill.success{background:#ecfdf3;color:var(--success)}
  .pill.warn{background:#fff7ed;color:#ea580c}
  .actions{cursor:pointer;opacity:.85}
  /* Modal */
  .modal-back{position:fixed;inset:0;background:rgba(7,10,14,0.4);display:none;align-items:center;justify-content:center;padding:20px}
  .modal{background:var(--surface);padding:18px;border-radius:12px;max-width:720px;width:100%;box-shadow:var(--shadow)}
  .modal.show{display:block}
  /* Responsive */
  @media(max-width:900px){.grid{grid-template-columns:repeat(2,1fr)} .layout{grid-template-columns:1fr} .app{padding:12px}}
  @media(max-width:480px){.grid{grid-template-columns:1fr} .app{grid-template-columns:1fr} .sidebar{display:none}}
  /* Accessibility focus */
  :focus{outline:3px solid rgba(91,140,255,0.25);outline-offset:2px}
</style>
</head>
<body>
<div id="root" class="app">
  <aside class="sidebar" id="sidebar" aria-label="Primary">
    <div class="brand" role="img" aria-label="Readdy brand">
      <!-- inline svg logo -->
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" rx="10" fill="#e8f0ff"/><path d="M14 30c4-8 20-8 24 0" stroke="#5b8cff" stroke-width="3" stroke-linecap="round"/></svg>
      <span style="font-weight:700">Readdy</span>
    </div>
    <nav aria-label="Main navigation">
      <ul>
        <li class="active" tabindex="0"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 13h4v8H3zM10 3h4v18h-4zM17 7h4v14h-4z" fill="#5b8cff"/></svg><span class="label">Dashboard</span></li>
        <li tabindex="0"><svg width="18" height="18" viewBox="0 0 24 24"><path d="M3 12h18" stroke="#97a6b8" stroke-width="2"/></svg><span class="label">Analytics</span></li>
        <li tabindex="0"><svg width="18" height="18" viewBox="0 0 24 24"><circle cx="12" cy="12" r="9" stroke="#97a6b8" stroke-width="2"/></svg><span class="label">Orders</span></li>
        <li tabindex="0"><svg width="18" height="18" viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="2" stroke="#97a6b8" stroke-width="2"/></svg><span class="label">Products</span></li>
        <li tabindex="0"><svg width="18" height="18" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16" stroke="#97a6b8" stroke-width="2"/></svg><span class="label">Customers</span></li>
        <li tabindex="0"><svg width="18" height="18" viewBox="0 0 24 24"><path d="M12 8v8M8 12h8" stroke="#97a6b8" stroke-width="2"/></svg><span class="label">Settings</span></li>
      </ul>
    </nav>
    <button class="toggle" id="sidebarToggle" aria-expanded="true">Toggle sidebar</button>
  </aside>

  <main>
    <header class="topbar" role="banner">
      <div style="display:flex;align-items:center;gap:12px">
        <div>
          <h1 style="margin:0;font-size:18px">Dashboard</h1>
          <div style="font-size:12px;color:var(--muted)">Overview · Sales</div>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:12px">
        <div class="search" role="search">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="#97a6b8" stroke-width="2"/></svg>
          <input id="searchInput" placeholder="Search orders, customers..." aria-label="Search orders" />
        </div>
        <button aria-label="Notifications" id="notifBtn" title="Notifications" style="background:var(--surface);border-radius:10px;padding:8px;border:0;box-shadow:var(--shadow)"><span class="badge" id="notifBadge">3</span></button>
        <div style="display:flex;align-items:center;gap:8px">
          <img src="" alt="" style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#dbeafe,#eef2ff)" />
        </div>
      </div>
    </header>

    <section class="grid" aria-live="polite">
      <div class="card"><h3>Total Sales</h3><p id="totalSales">₹ 42,360</p></div>
      <div class="card"><h3>Orders</h3><p id="ordersCount">1,236</p></div>
      <div class="card"><h3>Active Users</h3><p id="usersCount">5,420</p></div>
      <div class="card"><h3>Conversion</h3><p id="convRate">2.4%</p></div>
    </section>

    <section class="layout">
      <div class="chart">
        <h3 style="margin:0 0 8px 0">Sales (last 30 days)</h3>
        <canvas id="salesChart" width="800" height="320" role="img" aria-label="Sales line chart"></canvas>
      </div>

      <aside class="right-stack">
        <div class="chart" aria-label="Traffic sources">
          <h4 style="margin:0 0 8px 0">Traffic Sources</h4>
          <svg class="donut" viewBox="0 0 42 42" role="img" aria-label="Donut chart">
            <circle cx="21" cy="21" r="15.9155" fill="transparent" stroke="#e6eefc" stroke-width="10"></circle>
            <g transform="rotate(-90 21 21)">
              <circle cx="21" cy="21" r="15.9155" fill="transparent" stroke="#5b8cff" stroke-width="10" stroke-dasharray="40 60" stroke-linecap="round"></circle>
              <circle cx="21" cy="21" r="15.9155" fill="transparent" stroke="#34d399" stroke-width="10" stroke-dasharray="30 70" stroke-linecap="round" transform="rotate(40 21 21)"></circle>
            </g>
          </svg>
          <div style="font-size:13px;color:var(--muted)"><div>Direct · 40%</div><div>Organic · 30%</div><div>Referral · 20%</div><div>Social · 10%</div></div>
        </div>

        <div class="card">
          <h4 style="margin:0 0 8px 0">Top products</h4>
          <div style="display:flex;flex-direction:column;gap:10px">
            <div style="display:flex;align-items:center;gap:10px">
              <div style="width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,#fef3c7,#fff7ed);display:flex;align-items:center;justify-content:center;font-weight:700">P1</div>
              <div style="flex:1"><div style="font-weight:600">Coffee Mug</div><div style="font-size:13px;color:var(--muted)">320 units · ₹12,800</div></div>
            </div>
            <div style="display:flex;align-items:center;gap:10px">
              <div style="width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,#ede9fe,#eef2ff);display:flex;align-items:center;justify-content:center;font-weight:700">P2</div>
              <div style="flex:1"><div style="font-weight:600">T-Shirt</div><div style="font-size:13px;color:var(--muted)">210 units · ₹9,450</div></div>
            </div>
          </div>
        </div>

      </aside>
    </section>

    <section class="table-wrap" aria-label="Latest transactions">
      <h3 style="margin-top:0">Latest Transactions</h3>
      <table id="txnTable" role="table">
        <thead><tr><th>Order</th><th>Customer</th><th>Date</th><th>Amount</th><th>Status</th><th></th></tr></thead>
        <tbody id="txnBody"></tbody>
      </table>
    </section>

    <footer style="margin-top:18px;font-size:13px;color:var(--muted)">© 2025 Readdy · v1.0</footer>

  </main>
</div>

<!-- Modal -->
<div id="modalBack" class="modal-back" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal" role="document" id="modal">
    <h3 id="modalTitle">Order Details</h3>
    <div id="modalContent" style="margin-top:8px;color:var(--muted)">Loading...</div>
    <div style="margin-top:14px;text-align:right"><button id="closeModal" style="padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:#fff">Close</button></div>
  </div>
</div>

<script>
(() => {
  // Sample data (30 days)
  const sample = {
    sales: Array.from({length:30},(_,i)=>({date:new Date(Date.now()-(29-i)*864e5).toISOString().slice(0,10), value: Math.round(8000 + Math.random()*12000)})),
    transactions: [
      {id:'ORD-1001',customer:'Asha Verma',date:'2025-09-05',amount:1299,status:'Completed'},
      {id:'ORD-1002',customer:'Rahul K',date:'2025-09-04',amount:2599,status:'Pending'},
      {id:'ORD-1003',customer:'Maya S',date:'2025-09-02',amount:499,status:'Refunded'},
      {id:'ORD-1004',customer:'Vikram P',date:'2025-09-01',amount:799,status:'Completed'}
    ],
    metrics:{revenue:42360,orders:1236,users:5420,conv:2.4}
  };

  // Populate metrics
  document.getElementById('totalSales').textContent = '₹ ' + sample.metrics.revenue.toLocaleString();
  document.getElementById('ordersCount').textContent = sample.metrics.orders.toLocaleString();
  document.getElementById('usersCount').textContent = sample.metrics.users.toLocaleString();
  document.getElementById('convRate').textContent = sample.metrics.conv + '%';

  // Transactions table render
  const txnBody = document.getElementById('txnBody');
  function renderTable(list){
    txnBody.innerHTML = '';
    list.forEach(tx=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `<td><a href="#" class="order-link">${tx.id}</a></td><td>${tx.customer}</td><td>${tx.date}</td><td>₹ ${tx.amount}</td><td><span class="pill ${tx.status==='Completed'?'success':'Pending'===tx.status?'warn':''}">${tx.status}</span></td><td class="actions">⋯</td>`;
      tr.querySelector('.order-link').addEventListener('click',e=>{e.preventDefault(); openModal(tx);});
      txnBody.appendChild(tr);
    });
  }
  renderTable(sample.transactions);

  // Search
  const searchInput = document.getElementById('searchInput');
  searchInput.addEventListener('input', e=>{
    const q = e.target.value.toLowerCase();
    const filtered = sample.transactions.filter(t=> t.id.toLowerCase().includes(q) || t.customer.toLowerCase().includes(q));
    renderTable(filtered);
  });

  // Modal
  const modalBack = document.getElementById('modalBack');
  const modal = document.getElementById('modal');
  function openModal(tx){ modalBack.style.display='flex'; modalBack.setAttribute('aria-hidden','false'); document.getElementById('modalTitle').textContent = tx.id; document.getElementById('modalContent').textContent = `${tx.customer} — ${tx.date} — ₹ ${tx.amount} — ${tx.status}`; document.getElementById('closeModal').focus(); }
  function closeModal(){ modalBack.style.display='none'; modalBack.setAttribute('aria-hidden','true'); }
  document.getElementById('closeModal').addEventListener('click',closeModal);
  modalBack.addEventListener('click', (e)=>{ if(e.target===modalBack) closeModal(); });
  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

  // Sidebar toggle + persist
  const root = document.getElementById('root');
  const toggle = document.getElementById('sidebarToggle');
  const isCollapsed = localStorage.getItem('sidebar-coll') === '1';
  if(isCollapsed) root.classList.add('collapsed');
  toggle.addEventListener('click', ()=>{
    root.classList.toggle('collapsed');
    localStorage.setItem('sidebar-coll', root.classList.contains('collapsed')?'1':'0');
    toggle.setAttribute('aria-expanded', String(!root.classList.contains('collapsed')));
  });

  // Notification button (UI only)
  const notifBtn = document.getElementById('notifBtn'), notifBadge = document.getElementById('notifBadge');
  notifBtn.addEventListener('click', ()=>{ notifBadge.style.display='none'; alert('Notifications viewed (UI only)'); });

  // Sales chart (canvas)
  const canvas = document.getElementById('salesChart');
  const ctx = canvas.getContext('2d');
  function drawChart(){
    const dpr = window.devicePixelRatio || 1;
    const w = canvas.clientWidth, h = 220;
    canvas.width = Math.floor(w * dpr); canvas.height = Math.floor(h * dpr);
    ctx.scale(dpr,dpr);
    ctx.clearRect(0,0,w,h);
    // compute scales
    const vals = sample.sales.map(s=>s.value);
    const min = Math.min(...vals), max = Math.max(...vals);
    const pad = 30;
    const plotW = w - pad*2, plotH = h - pad*2;
    // draw grid
    ctx.strokeStyle = '#eef2f7'; ctx.lineWidth=1;
    for(let i=0;i<4;i++){ const y = pad + i*(plotH/3); ctx.beginPath(); ctx.moveTo(pad,y); ctx.lineTo(w-pad,y); ctx.stroke(); }
    // draw line
    ctx.beginPath(); ctx.lineWidth=2; ctx.strokeStyle='#5b8cff';
    sample.sales.forEach((pt,i)=>{
      const x = pad + (i/(sample.sales.length-1))*plotW;
      const y = pad + plotH * (1 - (pt.value - min)/(max-min||1));
      if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
    });
    ctx.stroke();
    // fill area
    ctx.lineTo(w-pad, h-pad); ctx.lineTo(pad, h-pad); ctx.closePath();
    ctx.fillStyle = 'rgba(91,140,255,0.12)'; ctx.fill();
    // points
    ctx.fillStyle='#fff'; ctx.strokeStyle='#5b8cff';
    sample.sales.forEach((pt,i)=>{
      const x = pad + (i/(sample.sales.length-1))*plotW;
      const y = pad + plotH * (1 - (pt.value - min)/(max-min||1));
      ctx.beginPath(); ctx.arc(x,y,3,0,Math.PI*2); ctx.fill(); ctx.stroke();
    });
  }
  drawChart();
  window.addEventListener('resize', ()=>{ drawChart(); });

  // Small runtime checks (no console errors)
  console.log('Dashboard initialized — checks:', {
    canvas: !!ctx, txnRows: sample.transactions.length, localStorageAvailable: !!localStorage
  });

})();
</script>
</body>
</html>
